app-id: io.github.glitterware.Passy
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk
command: passy
separate-locales: false
finish-args:
- '--share=ipc'
- '--socket=fallback-x11'
- '--socket=wayland'
- '--device=dri'
- '--socket=pulseaudio'
- '--share=network'
- '--filesystem=xdg-documents/Passy'
- '--filesystem=~/Documents/Passy'
- '--filesystem=~/Passy'
- '--filesystem=~/.mozilla/native-messaging-hosts'
- '--filesystem=~/.config/microsoft-edge/NativeMessagingHosts'
- '--filesystem=~/.config/google-chrome/NativeMessagingHosts'
- '--filesystem=~/.config/chromium/NativeMessagingHosts'
- '--filesystem=~/.config/BraveSoftware/Brave-Browser/NativeMessagingHosts'
modules:
- name: passy
  buildsystem: simple
  sources:
  - type: archive
    url: https://github.com/GlitterWare/Passy-Releases/blob/v1.7.0/Passy-v1.7.0-Linux-Bundle-No-Updates-Popup.zip?raw=true
    sha256: 3bc654d603c8267f735d077bc11450e4b04163707d6f200ce213d461b6a6a19a
    archive-type: zip
    dest: bundle
  build-commands:
  - mv bundle/com.glitterware.passy.svg bundle/io.github.glitterware.Passy.svg
  - sed -i 's/com.glitterware.passy/io.github.glitterware.Passy/' bundle/com.glitterware.passy.appdata.xml
  - mv bundle/com.glitterware.passy.appdata.xml bundle/io.github.glitterware.Passy.metainfo.xml
  - sed -i 's/com.glitterware.passy/io.github.glitterware.Passy/' bundle/com.glitterware.passy.desktop
  - mv bundle/com.glitterware.passy.desktop bundle/io.github.glitterware.Passy.desktop
  - mkdir -p /app/Passy
  - cp -r bundle/* /app/Passy
  - chmod +x /app/Passy/passy
  - mkdir -p /app/bin
  - ln -s /app/Passy/passy /app/bin/passy
  - install -Dm644 bundle/io.github.glitterware.Passy.svg -t /app/share/icons/hicolor/scalable/apps
  - install -Dm644 bundle/io.github.glitterware.Passy.metainfo.xml -t /app/share/metainfo  
  - install -Dm644 bundle/io.github.glitterware.Passy.desktop -t /app/share/applications
  
